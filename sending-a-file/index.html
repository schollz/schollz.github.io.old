<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Sending a file in 2017</title><meta name=description content><meta itemprop=name content="Sending a file in 2017"><meta itemprop=description content><meta name=twitter:card content=summary><meta name=twitter:title content="Sending a file in 2017"><meta name=twitter:description content><meta name=twitter:site content=@yakczar><meta name=twitter:creator content=@yakczar><meta name=og:title content="Sending a file in 2017"><meta name=og:description content><meta name=og:type content=website><style>body{margin:0 auto 1em auto;max-width:40em;padding:0 .62em;font:.9em/1.62 sans-serif;color:#555}h1,h2,h3,strong{color:#333;line-height:1.2}a{color:#e81c4f}code{background-color:#f5f7f9}pre{color:#45484e;background:#f5f7f9;padding:1em;border-left:2px solid #69c;vertical-align:text-bottom;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}@media print{body{max-width:none}}img{width:100%}a,u{text-decoration:none}blockquote{font-style:italic;font-size:1.3em;margin:1.5em 5px;padding:.5em 5px;margin-bottom:0;quotes:"\201C""\201D""\2018""\2019"}blockquote:before{color:#ccc;content:open-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}blockquote:after{color:#ccc;content:close-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}blockquote p{display:inline}p{padding-top:10px}h1{font-size:1.25rem}@media screen and (min-width:30em) and (max-width:60em){h1{font-size:1.5rem}}@media screen and (min-width:60em){h1{font-size:2rem}}.twitter-tweet{display:inline-block;font-family:helvetica neue,Roboto,segoe ui,Calibri,sans-serif;font-size:12px;font-weight:700;line-height:16px;border-color:#eee #ddd #bbb;border-radius:5px;border-style:solid;border-width:1px;box-shadow:0 1px 3px rgba(0,0,0,.15);margin:10px 5px;padding:0 16px 16px;max-width:468px}.twitter-tweet p{font-size:16px;font-weight:400;line-height:20px}.twitter-tweet a{color:inherit;font-weight:400;text-decoration:none;outline:0 0}.twitter-tweet a:hover,.twitter-tweet a:focus{text-decoration:underline}.w3-tag{background-color:gray;color:#fff;display:inline-block;padding-left:4px;padding-right:4px;text-align:center;font-style:normal}figure{text-indent:0;padding-top:10px;padding-bottom:10px;-webkit-margin-start:0;-webkit-margin-end:0;padding-left:0;padding-right:0;margin-left:0;margin-right:0}figcaption{font-weight:400;font-style:italic;font-size:.7em/1.52;line-height:1.3;color:#666665;outline:0;z-index:300;text-align:center}table th,table td{padding:6px 13px;border:1px solid #dfe2e5;display:table-cell;vertical-align:inherit}table{margin:0 auto;border-spacing:0;border-collapse:collapse}table th{font-weight:600}</style><script>function ready(fn){if(document.attachEvent?document.readyState==="complete":document.readyState!=="loading"){var elements=document.querySelectorAll("img");Array.prototype.forEach.call(elements,function(el,i){if(el.getAttribute("alt")){const caption=document.createElement('figcaption');var node=document.createTextNode(el.getAttribute("alt"));caption.appendChild(node);const wrapper=document.createElement('figure');wrapper.className='image';el.parentNode.insertBefore(wrapper,el);el.parentNode.removeChild(el);wrapper.appendChild(el);wrapper.appendChild(caption);console.log(el);console.log(el.outerHTML)}});}else{document.addEventListener('DOMContentLoaded',fn);}}
window.onload=ready;</script><img src="https://analytics.schollz.com/1.png?page=https%3a%2f%2fschollz.github.io%2fsending-a-file%2f" width=1px height=1px style=float:right><p><small><span style=color:#000>schollz</span>&nbsp;&nbsp;·&nbsp;
<a href=https://schollz.github.io style=color:#000>/posts</a>&nbsp;&nbsp;·&nbsp;
<a href=https://schollz.github.io/about/ style=color:#000>/about</a>&nbsp;&nbsp;·&nbsp;
<a href=https://schollz.github.io/contact/ style=color:#000>/contact</a></small><header><a href=https://schollz.github.io/tags/coding/ class=w3-tag>coding</a></header><article><h1>Sending a file in 2017</h1><p>My good friend Jessie and I want to watch a documentary movie on turkeys together.<sup class=footnote-ref id=fnref:turkey><a rel=footnote href=#fn:turkey>1</a></sup> I have the file on my computer and she does not, so I want to send this file to her directly<sup class=footnote-ref id=fnref:direct><a rel=footnote href=#fn:direct>2</a></sup> from my computer. There are a couple of restrictions though:<ul><li>the turkey documentary is a ~1 GB file<li>Jessie lives 2,000 miles away in a different country<li>Jessie uses Windows OS<li>Jessie is not a programmer, and avoids anything that involves running something on the command-line</ul><p><strong>How should I send the movie, in the fastest possible way, so we can start learning about turkeys together?</strong><sup class=footnote-ref id=fnref:xkcd><a rel=footnote href=#fn:xkcd>3</a></sup> Even though its 2017, the method I use to send a file from my computer to someone else&rsquo;s computer will depend greatly on who that someone is and how comfortable they are with computers. Here&rsquo;s a table I made of the methods I tried with a brief description of what I would do to send the file (with my reaction) and what Jessie does to receive the file (and her reaction).<table><thead><tr><th align=center width=20%>Method<th align=center width=40%>What I do<th align=center width=40%>What Jessie does<tbody><tr><td align=center><a href=#mail>mail</a><td align=center><div style=width:30%><img src=/img/1f644.svg></div>mail a USB drive<td align=center><div style=width:30%><img src=/img/1f600.svg alt></div>plug in USB drive<tr><td align=center><a href=#scp><code>scp</code></a><td align=center><div style=width:30%><img src=/img/1f600.svg></div>run <code>scp</code><td align=center><div style=width:30%><img src=/img/1f635.svg alt></div>determine local IP, log-in to router and forward port 22, start SSH server, generate guest account and send password<tr><td align=center><a href=#scp>personal server</a><td align=center><div style=width:30%><img src=/img/1f614.svg></div>setup port-forwarding, download a server and a reverse proxy<td align=center><div style=width:30%><img src=/img/1f604.svg alt></div>click a link<tr><td align=center><a href=#ipfs>IPFS</a><td align=center><div style=width:30%><img src=/img/1f615.svg></div><a href=/ipfs-transfer/>install IPFS</a>, pin file, warm up cache<td align=center><div style=width:30%><img src=/img/1f604.svg alt></div>click a link<tr><td align=center><a href=#ipfs>WebTorrent</a><td align=center><div style=width:30%><img src=/img/1f610.svg></div>drag-and-drop file<td align=center><div style=width:30%><img src=/img/1f604.svg alt></div>click a link (hopefully)<tr><td align=center><a href=#wormhole><code>wormhole</code></a><td align=center><div style=width:30%><img src=/img/1f612.svg></div>apt-get Python2 ecosystem<td align=center><div style=width:30%><img src=/img/1f62d.svg alt></div>install Python ecosystem and Visual C++<tr><td align=center><a href=#croc><code>croc</code></a><td align=center><div style=width:30%><img src=/img/1f600.svg></div>run <code>croc</code><td align=center><div style=width:30%><img src=/img/thumbs-up-sign_1f44d.png alt></div>download <code>croc</code> and double-click</table><p>Read the following for a more in-depth description of the methods. Basically after investigating a lot of the techniques I ended up making my own.<sup class=footnote-ref id=fnref:standards><a rel=footnote href=#fn:standards>4</a></sup><h1 id=mail>Mail</h1><p><img src=/img/mail.png alt="Transfer rate: roughly 0.002 MB/s and cost is ~$1.20."><p>I could mail Jessie a USB with the file. I&rsquo;d have to buy a USB stick, even though I might get it back, its about $4. For a cross-country letter I would have to buy a stamp for $1.20. Also international postage is quite slow, so it would typically take about 10 days to reach her. Since I could recuperate the USB stick cost, sending ~1 gigabyte is basically a flat rate of $1.20, but with a transfer rate is about 0.002 MB/s. Though, the benefit here is that neither of us need to have a server, or know what port-forwarding or reverse proxies or DNSs are. One drawback is that this is not encrypted, although their the breaking of federal crimes would help to de-incentavize interfering with the transfer.<h1 id=scp><code>scp</code></h1><p><img src=/img/scp.png alt="Transfer rate: your upload speed."><p>I use <code>scp</code> for almost everything, since I&rsquo;ve got all my computers networked toegether. However, even though it seems like its super easy to do, there is a bit of setup. You have to have an SSH server running and you have to setup port-forwarding and determine your public IP address. Now all of this can be done pretty easily. If I were telling someone I would say: download Cygwin and choose <code>openssh</code> for installation, run cygwin and do ifconfig to get your local IP, login to your router and forward port 22 to your local IP address, then goto icanhazip.com to get your public IP address and tell the other person your public address. But, to really be secure (and not share your personal password) you&rsquo;d also have to share a SSH key with your friend. Well, I guess <code>scp</code> is not really great for sharing between friends afterall, but it is certainly great for personal use!<h1 id=personal-server>Personal server</h1><p><img src=/img/droplet.png alt="Transfer rate: harmonic mean of Your upload speed and your recipient's download rate."><p>Since I do know what a server is and how to use it, there is a easy solution. I could upload the documentary to my DigitalOcean droplet, then host the file so she can download it. The nice thing about DigitalOcean <a href=https://www.digitalocean.com/community/tutorials/how-to-use-block-storage-on-digitalocean>now-a-days is that you can spin-up a new volume</a> in about 2 minutes, mount it, and put a file on it for someone to download. A 3 GB volume (which will easily accommodate my ~1 GB) costs $0.30 <em>per month</em>.<p>So I spin up my volume, <code>scp</code> my file to my personal server and I host the file with something like Caddy. I send Jessie the link, I can let her download it. Once she downloads it I can go log-in to DigitalOcean and delete the volume. If Jessie downloads it in 24 hours it would only cost me exactly $0.01, which is a flat rate.<p>The transfer rate involves two steps. First I upload the file to DigitalOcean at 0.8 MB/s. Then Jessie downloads it at about 3.5 MB/s. Assuming Jessie downloads it the instant it is finished uploading (to minimize the time between steps to zero), the overall transfer rate is the harmonic mean of the two rates, about 0.7 MB/s.<h1 id=webtorrent>WebTorrent</h1><p><img src=/img/webtorrent.png alt="Transfer rate: your upload speed"><p>There are web browsers out there that let you store files temporarily. An example is <a href=https://send.firefox.com/>send.firefox.com</a>. This case would be very similar to the personal server solution, except you are limited to the bandwidths and quotas of the web browser (which is 1 gigabyte for send.firefox.com). The more modern approach is something like <a href=https://instant.io/>instant.io</a> or <a href=https://file.pizza/>file.pizza</a> which both leverage the WebTorrent javascript protocols.<p>These sites let you directly send files from one peer to another. However, I noticed that both have problems with handling big files,<sup class=footnote-ref id=fnref:issues><a rel=footnote href=#fn:issues>5</a></sup> which may be a browser issue that occurs (definitely an issue on Chrome). Also, speaking of browsers, I&rsquo;d rather not rely on them to transfer my files (in fact the second time I tried file.pizza it gave me a <code>503</code> and instant.io was just unresponsive). These servers depend on too many undependables: people that host the servers, browsers that change too fast, too much under the hood to understand what is happening and whether data is saved or exposed or encrypted or what.<h1 id=ipfs>IPFS</h1><p><img src=/img/ipfs.png alt="Transfer rate: your upload speed plus ~25 minutes for look-up (first time). Subsequently, the recipient's download speed."><p>Peer-to-peer technologies are very popular now, not just in the browser. The interplanetary file system (IPFS) creates a <a href=https://ipfs.io/>peer-to-peer hypermedia protocol</a> for sharing files. Seem <a href=/ipfs-transfer>my previous post</a> about sending a file with IPFS. The problem with IPFS is that it requires a long lookup for rare files, in the case of most files you might want to share. However, if you are sharing the file with multiple people the speeds will increase as there are some great caching mechanisms in place on the gateway. Because the peer-to-peer lookup depends on so many factors, the download may be a bit stochastic.<h1 id=wormhole>wormhole</h1><p><img src="https://i.imgur.com/zvG7RTM.png =100px" alt="Transfer rate: your upload speed."><p>It still turns out that there are solutions that work on the command-line. There is <a href=https://github.com/zerotier/toss>toss</a><sup class=footnote-ref id=fnref:toss><a rel=footnote href=#fn:toss>6</a></sup> and there is the amazing <a href=https://github.com/warner/magic-wormhole>wormhole</a> package. Still, though, when I looked at <code>wormhole</code> I realized I would have to install it on Jessie&rsquo;s computer. Normally that wouldn&rsquo;t be a problem, except that Jessie uses Windows and the only thing Jessie knows about Python is that it is a snake. Also the installation for <code>wormhole</code> is not simple - it seems to require Visual C++, and very likely some Cygwin-ninjaing.<h1 id=croc>croc</h1><p><img src=/img/croc.png alt="Transfer rate: your upload speed."><p>Here&rsquo;s my shameless plug of a new tool I&rsquo;ve been working on. Essentially it is the same as <code>wormhole</code> but it has no dependencies, you <a href=https://github.com/schollz/croc/releases/latest>can just download it and run</a>. It does encryption, too, and uses parallel TCP ports to transfer files as fast as possible (which is about as fast as all the other programs).<p>This solution ends up being ideal for Jessie and I because its simple for me (I just download and run with the file as a flag) and its simple for Jessie (she just downloads and run).<hr><h2 id=foot-notes>Foot notes</h2><div class=footnotes><hr><ol><li id=fn:turkey>The documentary is <em>My Life as a Turkey</em> which follows an actors real interactions with wild turkeys following methodology put in place through author Joe Hutto&rsquo;s book <em>Illumination in the Flatwoods.</em>
<a class=footnote-return href=#fnref:turkey><sup>[return]</sup></a><li id=fn:direct>By &ldquo;directly&rdquo; I mean generally without being stored on a server in the process of transferring. Things like email, Dropbox, Google Drive, OneDrive, etc. all have an intermediate server which stores your file before the other person can retrieve it.
<a class=footnote-return href=#fnref:direct><sup>[return]</sup></a><li id=fn:xkcd>For posterity&rsquo;s sake <a href=https://xkcd.com/949/>here is the relevant XKCD</a>.
<a class=footnote-return href=#fnref:xkcd><sup>[return]</sup></a><li id=fn:standards>Again, for posterity&rsquo;s sake <a href=https://xkcd.com/927/>here is the relevant XKCD</a>.
<a class=footnote-return href=#fnref:standards><sup>[return]</sup></a><li id=fn:issues>See <a href=https://github.com/webtorrent/instant.io/issues/149>instant.io issue #149</a> and <a href=https://github.com/kern/filepizza/issues/73>file.pizza issue #73</a>.
<a class=footnote-return href=#fnref:issues><sup>[return]</sup></a><li id=fn:toss>Though <a href=https://github.com/zerotier/toss/issues/2>issues also persist for toss</a>.
<a class=footnote-return href=#fnref:toss><sup>[return]</sup></a></ol></div></article><footer><p><small><em>Written October 21, 2017.</em></small><p><small>Leave a comment for me on Twitter <a href="https://twitter.com/intent/tweet?text=%40yakcar%20%23sending-a-file%20">@yakczar</a>.</small></span></footer>