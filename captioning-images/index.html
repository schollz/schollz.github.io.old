<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Easily captioning images from Markdown</title><meta name=description content><meta itemprop=name content="Easily captioning images from Markdown"><meta itemprop=description content><meta name=twitter:card content=summary><meta name=twitter:title content="Easily captioning images from Markdown"><meta name=twitter:description content><meta name=twitter:site content=@yakczar><meta name=twitter:creator content=@yakczar><meta name=og:title content="Easily captioning images from Markdown"><meta name=og:description content><meta name=og:type content=website><link rel=stylesheet href=/css/style.css><script src=/js/caption.js></script><div class=content><h1>Easily captioning images from Markdown<aside><a href=/tags/coding/ class=w3-tag>/coding</a>&nbsp;</aside></h1><p>Here is a nice trick for captioning images with only <code>alt</code> tags. This is useful when using Markdown to generate HTML pages, since Markdown in its natural form only includes creates an image tag, i.e. <code>![alt tag](img src)</code> -&gt; <code>&lt;img alt=&quot;alt tag&quot; src=&quot;img src&quot;&gt;</code>. For good captions, we need to add a <code>figcaption</code> and wrap both inside a <code>figure</code>.<p>Turns out this is easily done with Javascript to generate figure captions on the load of the page. The script <a href=https://blog.kchung.co/adding-image-captions-to-ghost/>I initially found to do this</a> is the following:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>$</span><span>(</span><span style=color:#e6db74>&#34;.post-content img&#34;</span><span>).</span><span style=color:#a6e22e>each</span><span>(</span><span>
</span><span></span><span style=color:#66d9ef>function</span><span>()</span><span> </span><span>{</span><span>
</span><span>    </span><span style=color:#66d9ef>if</span><span> </span><span>(</span><span style=color:#a6e22e>$</span><span>(</span><span style=color:#66d9ef>this</span><span>).</span><span style=color:#a6e22e>attr</span><span>(</span><span style=color:#e6db74>&#34;alt&#34;</span><span>))</span><span> </span><span>{</span><span>
</span><span>        </span><span style=color:#a6e22e>$</span><span>(</span><span style=color:#66d9ef>this</span><span>).</span><span style=color:#a6e22e>wrap</span><span>(</span><span>
</span><span>            </span><span style=color:#e6db74>&#39;&lt;figure class=&#34;image&#34;&gt;&lt;/figure&gt;&#39;</span><span>
</span><span>        </span><span>).</span><span style=color:#a6e22e>after</span><span>(</span><span>
</span><span>            </span><span style=color:#e6db74>&#39;&lt;figcaption&gt;&#39;</span><span> </span><span style=color:#f92672>+</span><span>
</span><span>            </span><span style=color:#a6e22e>$</span><span>(</span><span style=color:#66d9ef>this</span><span>).</span><span style=color:#a6e22e>attr</span><span>(</span><span>
</span><span>                </span><span style=color:#e6db74>&#34;alt&#34;</span><span>)</span><span> </span><span style=color:#f92672>+</span><span>
</span><span>            </span><span style=color:#e6db74>&#39;&lt;/figcaption&gt;&#39;</span><span>
</span><span>        </span><span>);</span><span>
</span><span>    </span><span>}</span><span>
</span><span></span><span>});</span><span> </span><span style=color:#960050;background-color:#1e0010>// from https://blog.kchung.co/adding-image-captions-to-ghost/</span></code></pre></div><p>It works great, but it requires JQuery.<p>I carefully followed <a href=https://github.com/oneuijs/You-Dont-Need-jQuery>oneuijs/You-Dont-Need-jQuery</a> and I was able to convert this to just plain Javascript:<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>function</span><span> </span><span style=color:#a6e22e>ready</span><span>(</span><span style=color:#a6e22e>fn</span><span>)</span><span> </span><span>{</span><span>
</span><span>    </span><span style=color:#66d9ef>if</span><span> </span><span>(</span><span>document</span><span>.</span><span style=color:#a6e22e>attachEvent</span><span> </span><span style=color:#f92672>?</span><span> </span><span>document</span><span>.</span><span style=color:#a6e22e>readyState</span><span> </span><span style=color:#f92672>===</span><span> </span><span style=color:#e6db74>&#34;complete&#34;</span><span> </span><span style=color:#f92672>:</span><span>
</span><span>        </span><span>document</span><span>.</span><span style=color:#a6e22e>readyState</span><span> </span><span style=color:#f92672>!==</span><span> </span><span style=color:#e6db74>&#34;loading&#34;</span><span>)</span><span> </span><span>{</span><span>
</span><span>        </span><span style=color:#66d9ef>var</span><span> </span><span style=color:#a6e22e>elements</span><span> </span><span style=color:#f92672>=</span><span> </span><span>document</span><span>.</span><span style=color:#a6e22e>querySelectorAll</span><span>(</span><span style=color:#e6db74>&#34;img&#34;</span><span>);</span><span>
</span><span>        </span><span>Array</span><span>.</span><span style=color:#a6e22e>prototype</span><span>.</span><span style=color:#a6e22e>forEach</span><span>.</span><span style=color:#a6e22e>call</span><span>(</span><span style=color:#a6e22e>elements</span><span>,</span><span> </span><span style=color:#66d9ef>function</span><span>(</span><span style=color:#a6e22e>el</span><span>,</span><span> </span><span style=color:#a6e22e>i</span><span>)</span><span> </span><span>{</span><span>
</span><span>            </span><span style=color:#66d9ef>if</span><span> </span><span>(</span><span style=color:#a6e22e>el</span><span>.</span><span style=color:#a6e22e>getAttribute</span><span>(</span><span style=color:#e6db74>&#34;alt&#34;</span><span>))</span><span> </span><span>{</span><span>
</span><span>                </span><span style=color:#66d9ef>const</span><span> </span><span style=color:#a6e22e>caption</span><span> </span><span style=color:#f92672>=</span><span> </span><span>document</span><span>.</span><span style=color:#a6e22e>createElement</span><span>(</span><span style=color:#e6db74>&#39;figcaption&#39;</span><span>);</span><span>
</span><span>                </span><span style=color:#66d9ef>var</span><span> </span><span style=color:#a6e22e>node</span><span> </span><span style=color:#f92672>=</span><span> </span><span>document</span><span>.</span><span style=color:#a6e22e>createTextNode</span><span>(</span><span style=color:#a6e22e>el</span><span>.</span><span style=color:#a6e22e>getAttribute</span><span>(</span><span style=color:#e6db74>&#34;alt&#34;</span><span>));</span><span>
</span><span>                </span><span style=color:#a6e22e>caption</span><span>.</span><span style=color:#a6e22e>appendChild</span><span>(</span><span style=color:#a6e22e>node</span><span>);</span><span>
</span><span>                </span><span style=color:#66d9ef>const</span><span> </span><span style=color:#a6e22e>wrapper</span><span> </span><span style=color:#f92672>=</span><span> </span><span>document</span><span>.</span><span style=color:#a6e22e>createElement</span><span>(</span><span style=color:#e6db74>&#39;figure&#39;</span><span>);</span><span>
</span><span>                </span><span style=color:#a6e22e>wrapper</span><span>.</span><span style=color:#a6e22e>className</span><span> </span><span style=color:#f92672>=</span><span> </span><span style=color:#e6db74>&#39;image&#39;</span><span>;</span><span>
</span><span>                </span><span style=color:#a6e22e>el</span><span>.</span><span style=color:#a6e22e>parentNode</span><span>.</span><span style=color:#a6e22e>insertBefore</span><span>(</span><span style=color:#a6e22e>wrapper</span><span>,</span><span> </span><span style=color:#a6e22e>el</span><span>);</span><span>
</span><span>                </span><span style=color:#a6e22e>el</span><span>.</span><span style=color:#a6e22e>parentNode</span><span>.</span><span style=color:#a6e22e>removeChild</span><span>(</span><span style=color:#a6e22e>el</span><span>);</span><span>
</span><span>                </span><span style=color:#a6e22e>wrapper</span><span>.</span><span style=color:#a6e22e>appendChild</span><span>(</span><span style=color:#a6e22e>el</span><span>);</span><span>
</span><span>                </span><span style=color:#a6e22e>wrapper</span><span>.</span><span style=color:#a6e22e>appendChild</span><span>(</span><span style=color:#a6e22e>caption</span><span>);</span><span>
</span><span>            </span><span>}</span><span>
</span><span>        </span><span>});</span><span>
</span><span>    </span><span>}</span><span> </span><span style=color:#66d9ef>else</span><span> </span><span>{</span><span>
</span><span>        </span><span>document</span><span>.</span><span style=color:#a6e22e>addEventListener</span><span>(</span><span style=color:#e6db74>&#39;DOMContentLoaded&#39;</span><span>,</span><span> </span><span style=color:#a6e22e>fn</span><span>);</span><span>
</span><span>    </span><span>}</span><span>
</span><span></span><span>}</span><span>
</span><span></span><span>window</span><span>.</span><span style=color:#a6e22e>onload</span><span> </span><span style=color:#f92672>=</span><span> </span><span style=color:#a6e22e>ready</span><span>;</span></code></pre></div><p>Of course this looks a little more complicated, but it works just the same. This is what is running on this site! Here&rsquo;s an example of a captioned image:<p><img src=/img/worms.svg alt="This picture of worms has a caption!"><p>Go ahead and copy that to whatever site you want!</div><footer><p><small><em>Written September 27, 2017.</em>
Send feedback to <a href="https://twitter.com/intent/tweet?text=%40yakczar%20%23captioning-images%20">@yakczar</a>.</small><p><a href=/ice-cubes/>← How much ice do you need?</a>&nbsp;
<a href=/docker-news/ style=float:right>Read news in the terminal with Docker →</a></footer>